#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH << File.dirname(File.expand_path(__FILE__))

require 'English'
require_relative '../src/windows/Root_Window'
require_relative '../src/windows/Window'
require_relative '../src/windows/Move'
require_relative '../src/windows/Mouse_Pointer'
require_relative '../src/windows/Location_Name'

require_relative '../src/windows/Fullscreen'
require_relative '../src/windows/Left_Side'
require_relative '../src/windows/Right_Bottom'
require_relative '../src/windows/Right_Side'
require_relative '../src/windows/Right_Top'
require_relative '../src/windows/Top_Half'
require_relative '../src/windows/Top_Stamp'
require_relative '../src/windows/Bottom_Half'
require_relative '../src/windows/Bottom_Stamp'

cmd = ARGV.join(' ')
prog = __FILE__.split('/').last

target_area = nil

case cmd
when '-h', '--help', 'help'
  puts "#{prog} -h|--help|help  --  Show this message."
  puts "#{prog}                 -- Run root window action."
  puts "#{prog} mouse_location"
  exit 0

when ''
  true

when 'mouse_location'
  puts Location_Name.new(ROOT, Mouse_Pointer.new).name
  exit 0

when 'middle_click'
  loc = Location_Name.new(ROOT, Mouse_Pointer.new)
  target_area = case loc.name
                when 'top_right_corner'
                  Right_Top
                when 'bottom_right_corner'
                  Right_Bottom
                when 'top_edge'
                  if smplayer?
                    Top_Half
                  else
                    Top_Stamp
                  end
                when 'bottom_edge'
                  Bottom_Half
                when 'left_edge'
                  Left_Side
                when 'right_edge'
                  Right_Side
                when 'left_side'
                  system 'xdotool key --clearmodifiers Left'
                  loc.name
                when 'right_side'
                  system 'xdotool key --clearmodifiers Right'
                  loc.name
                when 'center'
                  Fullscreen
                else
                  loc.name
                end # case

else
  warn "!!! Unknown action:  #{cmd.inspect}"
  exit 2

end # case

win = Window.new
win.move_to(target_area) if target_area && !target_area.is_a?(String)
puts target_area.inspect
